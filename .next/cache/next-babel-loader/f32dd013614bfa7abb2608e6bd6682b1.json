{"ast":null,"code":"import _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport cookie from 'js-cookie';\nexport default class ClientStorageComponent {\n  constructor() {\n    this.localStorageAvailable = true;\n    this.sessionStorageAvailable = true;\n\n    try {\n      window.localStorage.setItem('localStorageAvailable', true);\n      window.localStorage.removeItem('localStorageAvailable');\n    } catch (e) {\n      this.localStorageAvailable = false;\n    }\n\n    try {\n      window.sessionStorage.setItem('sessionStorageAvailable', true);\n      window.sessionStorage.removeItem('sessionStorageAvailable');\n    } catch (e) {\n      this.sessionStorageAvailable = false;\n    }\n  }\n  /**\n   * @param {string} name\n   * @param {string} [storageName]\n   * @returns {*}\n   */\n\n\n  get(name, storageName) {\n    storageName = storageName || this.STORAGE_LOCAL;\n\n    if (this.localStorageAvailable && storageName === this.STORAGE_LOCAL) {\n      return window.localStorage.getItem(name);\n    } else if (this.sessionStorageAvailable && storageName === this.STORAGE_SESSION) {\n      return window.sessionStorage.getItem(name);\n    }\n\n    return cookie.get(name);\n  }\n  /**\n   * @param {string} name\n   * @param {*} value\n   * @param {string} [storageName]\n   * @param {number|null} [expires]\n   */\n\n\n  set(name, value, storageName, expires = null) {\n    storageName = storageName || this.STORAGE_LOCAL;\n\n    if (this.localStorageAvailable && storageName === this.STORAGE_LOCAL) {\n      window.localStorage.setItem(name, value);\n    } else if (this.sessionStorageAvailable && storageName === this.STORAGE_SESSION) {\n      window.sessionStorage.setItem(name, value);\n    } else {\n      cookie.set(name, value, {\n        expires,\n        domain: this._getDomain()\n      });\n    }\n  }\n  /**\n   *\n   * @param {string} name\n   * @param {string} [storageName]\n   */\n\n\n  remove(name, storageName) {\n    storageName = storageName || this.STORAGE_LOCAL;\n\n    if (this.localStorageAvailable && storageName === this.STORAGE_LOCAL) {\n      window.localStorage.removeItem(name);\n    } else if (this.sessionStorageAvailable && storageName === this.STORAGE_SESSION) {\n      window.sessionStorage.removeItem(name);\n    } else {\n      cookie.remove(name, {\n        domain: this._getDomain()\n      });\n    }\n  }\n\n  _getDomain() {\n    const host = typeof location !== 'undefined' && location.hostname || '';\n    return host.split('.').slice(-2).join('.') || host;\n  }\n\n}\n\n_defineProperty(ClientStorageComponent, \"STORAGE_SESSION\", 'session');\n\n_defineProperty(ClientStorageComponent, \"STORAGE_LOCAL\", 'local');\n\n_defineProperty(ClientStorageComponent, \"STORAGE_COOKIE\", 'cookie');","map":{"version":3,"sources":["/usr/local/var/www/neutrino-web/node_modules/yii-steroids/components/ClientStorageComponent.js"],"names":["cookie","ClientStorageComponent","constructor","localStorageAvailable","sessionStorageAvailable","window","localStorage","setItem","removeItem","e","sessionStorage","get","name","storageName","STORAGE_LOCAL","getItem","STORAGE_SESSION","set","value","expires","domain","_getDomain","remove","host","location","hostname","split","slice","join"],"mappings":"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","sourcesContent":["import cookie from 'js-cookie';\n\nexport default class ClientStorageComponent {\n\n    static STORAGE_SESSION = 'session';\n    static STORAGE_LOCAL = 'local';\n    static STORAGE_COOKIE = 'cookie';\n\n    constructor() {\n        this.localStorageAvailable = true;\n        this.sessionStorageAvailable = true;\n\n        try {\n            window.localStorage.setItem('localStorageAvailable', true);\n            window.localStorage.removeItem('localStorageAvailable');\n        } catch (e) {\n            this.localStorageAvailable = false;\n        }\n\n        try {\n            window.sessionStorage.setItem('sessionStorageAvailable', true);\n            window.sessionStorage.removeItem('sessionStorageAvailable');\n        } catch (e) {\n            this.sessionStorageAvailable = false;\n        }\n    }\n\n    /**\n     * @param {string} name\n     * @param {string} [storageName]\n     * @returns {*}\n     */\n    get(name, storageName) {\n        storageName = storageName || this.STORAGE_LOCAL;\n\n        if (this.localStorageAvailable && storageName === this.STORAGE_LOCAL) {\n            return window.localStorage.getItem(name);\n        } else if (this.sessionStorageAvailable && storageName === this.STORAGE_SESSION) {\n            return window.sessionStorage.getItem(name);\n        }\n        return cookie.get(name);\n    }\n\n    /**\n     * @param {string} name\n     * @param {*} value\n     * @param {string} [storageName]\n     * @param {number|null} [expires]\n     */\n    set(name, value, storageName, expires = null) {\n        storageName = storageName || this.STORAGE_LOCAL;\n\n        if (this.localStorageAvailable && storageName === this.STORAGE_LOCAL) {\n            window.localStorage.setItem(name, value);\n        } else if (this.sessionStorageAvailable && storageName === this.STORAGE_SESSION) {\n            window.sessionStorage.setItem(name, value);\n        } else {\n            cookie.set(name, value, {\n                expires,\n                domain: this._getDomain(),\n            });\n        }\n    }\n\n    /**\n     *\n     * @param {string} name\n     * @param {string} [storageName]\n     */\n    remove(name, storageName) {\n        storageName = storageName || this.STORAGE_LOCAL;\n\n        if (this.localStorageAvailable && storageName === this.STORAGE_LOCAL) {\n            window.localStorage.removeItem(name);\n        } else if (this.sessionStorageAvailable && storageName === this.STORAGE_SESSION) {\n            window.sessionStorage.removeItem(name);\n        } else {\n            cookie.remove(name, {\n                domain: this._getDomain()\n            });\n        }\n    }\n\n    _getDomain() {\n        const host = typeof location !== 'undefined' && location.hostname || '';\n        return host.split('.').slice(-2).join('.') || host;\n    }\n\n}\n"]},"metadata":{},"sourceType":"module"}