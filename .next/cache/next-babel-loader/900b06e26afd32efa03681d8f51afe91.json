{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(source, true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(source).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport _get from 'lodash-es/get';\nimport _isEmpty from 'lodash-es/isEmpty';\nimport _isEqual from 'lodash-es/isEqual';\nimport { matchPath } from 'react-router';\nimport { ROUTING_REGISTER } from '../actions/routing';\nexport var LOCATION_CHANGE = '@@router/LOCATION_CHANGE';\nvar initialState = {\n  location: null,\n  action: null,\n  routes: []\n};\nvar routesCache = {};\nexport default (function () {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case LOCATION_CHANGE:\n      return _objectSpread({}, state, {\n        location: action.payload\n      });\n\n    case ROUTING_REGISTER:\n      return _objectSpread({}, state, {\n        routes: action.routes.map(function (item) {\n          return {\n            id: item.id,\n            exact: item.exact,\n            strict: item.strict,\n            path: item.path\n          };\n        })\n      });\n  }\n\n  return state;\n});\nexport var getCurrentRoute = function getCurrentRoute(state) {\n  if (!state || _isEmpty(state)) {\n    return null;\n  }\n\n  var currentRoute = null;\n\n  var pathname = _get(state, 'routing.location.pathname');\n\n  state.routing.routes.forEach(function (route) {\n    if (currentRoute) {\n      return;\n    }\n\n    var match = matchPath(pathname, route);\n\n    var finedRoute = match && _objectSpread({\n      id: route.id\n    }, match);\n\n    if (finedRoute) {\n      if (!routesCache[route.id] || !_isEqual(routesCache[route.id], finedRoute)) {\n        routesCache[route.id] = finedRoute;\n      }\n\n      currentRoute = routesCache[route.id];\n    }\n  });\n  return currentRoute;\n};","map":{"version":3,"sources":["/usr/local/var/www/neutrino-web/node_modules/yii-steroids/reducers/routing.js"],"names":["_get","_isEmpty","_isEqual","matchPath","ROUTING_REGISTER","LOCATION_CHANGE","initialState","location","action","routes","routesCache","state","type","payload","map","item","id","exact","strict","path","getCurrentRoute","currentRoute","pathname","routing","forEach","route","match","finedRoute"],"mappings":";;;;;;;;;;;;AAAA,OAAOA,IAAP,MAAiB,eAAjB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,OAAOC,QAAP,MAAqB,mBAArB;AACA,SAAQC,SAAR,QAAwB,cAAxB;AAEA,SAAQC,gBAAR,QAA+B,oBAA/B;AAEA,OAAO,IAAMC,eAAe,GAAG,0BAAxB;AAEP,IAAMC,YAAY,GAAG;AACjBC,EAAAA,QAAQ,EAAE,IADO;AAEjBC,EAAAA,MAAM,EAAE,IAFS;AAGjBC,EAAAA,MAAM,EAAE;AAHS,CAArB;AAKA,IAAMC,WAAW,GAAG,EAApB;AAEA,gBAAe,YAAkC;AAAA,MAAjCC,KAAiC,uEAAzBL,YAAyB;AAAA,MAAXE,MAAW;;AAC7C,UAAQA,MAAM,CAACI,IAAf;AACI,SAAKP,eAAL;AACI,+BACOM,KADP;AAEIJ,QAAAA,QAAQ,EAAEC,MAAM,CAACK;AAFrB;;AAKJ,SAAKT,gBAAL;AACI,+BACOO,KADP;AAEIF,QAAAA,MAAM,EAAED,MAAM,CAACC,MAAP,CAAcK,GAAd,CAAkB,UAAAC,IAAI;AAAA,iBAAK;AAC/BC,YAAAA,EAAE,EAAED,IAAI,CAACC,EADsB;AAE/BC,YAAAA,KAAK,EAAEF,IAAI,CAACE,KAFmB;AAG/BC,YAAAA,MAAM,EAAEH,IAAI,CAACG,MAHkB;AAI/BC,YAAAA,IAAI,EAAEJ,IAAI,CAACI;AAJoB,WAAL;AAAA,SAAtB;AAFZ;AARR;;AAkBA,SAAOR,KAAP;AACH,CApBD;AAuBA,OAAO,IAAMS,eAAe,GAAG,SAAlBA,eAAkB,CAACT,KAAD,EAAW;AACtC,MAAI,CAACA,KAAD,IAAUV,QAAQ,CAACU,KAAD,CAAtB,EAA+B;AAC3B,WAAO,IAAP;AACH;;AAED,MAAIU,YAAY,GAAG,IAAnB;;AACA,MAAMC,QAAQ,GAAGtB,IAAI,CAACW,KAAD,EAAQ,2BAAR,CAArB;;AACAA,EAAAA,KAAK,CAACY,OAAN,CAAcd,MAAd,CAAqBe,OAArB,CAA6B,UAAAC,KAAK,EAAI;AAClC,QAAIJ,YAAJ,EAAkB;AACd;AACH;;AAED,QAAMK,KAAK,GAAGvB,SAAS,CAACmB,QAAD,EAAWG,KAAX,CAAvB;;AACA,QAAME,UAAU,GAAGD,KAAK;AAAKV,MAAAA,EAAE,EAAES,KAAK,CAACT;AAAf,OAAsBU,KAAtB,CAAxB;;AACA,QAAIC,UAAJ,EAAgB;AACZ,UAAI,CAACjB,WAAW,CAACe,KAAK,CAACT,EAAP,CAAZ,IAA0B,CAACd,QAAQ,CAACQ,WAAW,CAACe,KAAK,CAACT,EAAP,CAAZ,EAAwBW,UAAxB,CAAvC,EAA4E;AACxEjB,QAAAA,WAAW,CAACe,KAAK,CAACT,EAAP,CAAX,GAAwBW,UAAxB;AACH;;AACDN,MAAAA,YAAY,GAAGX,WAAW,CAACe,KAAK,CAACT,EAAP,CAA1B;AACH;AACJ,GAbD;AAcA,SAAOK,YAAP;AACH,CAtBM","sourcesContent":["import _get from 'lodash-es/get';\nimport _isEmpty from 'lodash-es/isEmpty';\nimport _isEqual from 'lodash-es/isEqual';\nimport {matchPath} from 'react-router';\n\nimport {ROUTING_REGISTER} from '../actions/routing';\n\nexport const LOCATION_CHANGE = '@@router/LOCATION_CHANGE';\n\nconst initialState = {\n    location: null,\n    action: null,\n    routes: [],\n};\nconst routesCache = {};\n\nexport default (state = initialState, action) => {\n    switch (action.type) {\n        case LOCATION_CHANGE:\n            return {\n                ...state,\n                location: action.payload,\n            };\n\n        case ROUTING_REGISTER:\n            return {\n                ...state,\n                routes: action.routes.map(item => ({\n                    id: item.id,\n                    exact: item.exact,\n                    strict: item.strict,\n                    path: item.path,\n                })),\n            };\n    }\n    return state;\n};\n\n\nexport const getCurrentRoute = (state) => {\n    if (!state || _isEmpty(state)) {\n        return null;\n    }\n\n    let currentRoute = null;\n    const pathname = _get(state, 'routing.location.pathname');\n    state.routing.routes.forEach(route => {\n        if (currentRoute) {\n            return;\n        }\n\n        const match = matchPath(pathname, route);\n        const finedRoute = match && {id: route.id, ...match};\n        if (finedRoute) {\n            if (!routesCache[route.id] || !_isEqual(routesCache[route.id], finedRoute)) {\n                routesCache[route.id] = finedRoute;\n            }\n            currentRoute = routesCache[route.id];\n        }\n    });\n    return currentRoute;\n};\n"]},"metadata":{},"sourceType":"module"}