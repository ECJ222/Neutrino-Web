{"ast":null,"code":"import _Object$defineProperty from \"@babel/runtime-corejs2/core-js/object/define-property\";\nimport _Object$defineProperties from \"@babel/runtime-corejs2/core-js/object/define-properties\";\nimport _Object$getOwnPropertyDescriptors from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptors\";\nimport _Object$getOwnPropertyDescriptor from \"@babel/runtime-corejs2/core-js/object/get-own-property-descriptor\";\nimport _Object$getOwnPropertySymbols from \"@babel/runtime-corejs2/core-js/object/get-own-property-symbols\";\nimport _Object$keys from \"@babel/runtime-corejs2/core-js/object/keys\";\nimport _extends from \"@babel/runtime-corejs2/helpers/esm/extends\";\nimport _objectWithoutProperties from \"@babel/runtime-corejs2/helpers/esm/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = _Object$keys(object); if (_Object$getOwnPropertySymbols) { var symbols = _Object$getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return _Object$getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (_Object$getOwnPropertyDescriptors) { _Object$defineProperties(target, _Object$getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { _Object$defineProperty(target, key, _Object$getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React from 'react';\nimport { html, store, dal } from 'components';\nimport { goToPage } from 'yii-steroids/actions/navigation';\nimport OutsideAlerter from 'ui/global/OutsideAlerter';\nimport CurrencyEnum from 'enums/CurrencyEnum';\nimport { GlobalLinksContext, InstallKeeperModalContext } from 'shared/Layout/context';\nimport mainLogo from 'static/images/logo.svg';\nimport arrowDown from 'static/images/landing/arrow-down.svg';\nimport burgerIcon from 'static/images/landing/burger.svg';\nimport crossIcon from 'static/images/landing/cross-icon.svg';\nimport './style.scss';\nconst bem = html.bem('LandingHeader');\n\nclass LandingHeader extends React.Component {\n  // productLinks!: Link[];\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"learnLinks\", void 0);\n\n    _defineProperty(this, \"links\", void 0);\n\n    this.mapLink = this.mapLink.bind(this);\n    this.outsideHandler = this.outsideHandler.bind(this);\n    this.triggerLearnList = this.triggerLearnList.bind(this);\n    this.triggerProductsList = this.triggerProductsList.bind(this);\n    this.hideMobileMenu = this.hideMobileMenu.bind(this);\n    this.openMobileMenu = this.openMobileMenu.bind(this);\n    this.onErrorLogin = this.onErrorLogin.bind(this);\n    this.onSuccessLogin = this.onSuccessLogin.bind(this); // this.productLinks = [\n    //     {\n    //         label: 'Neutrino dashboard',\n    //         url: '/neutrino/usd-n',\n    //     },\n    //     {\n    //         label: 'Staking dashboard',\n    //         url: 'rpd/usd-n',\n    //     },\n    //     {\n    //         label: 'Bonds dashboard',\n    //         url: '/bonds/usd-n',\n    //     },\n    //     {\n    //         label: 'Exchange',\n    //         url:\n    //             'https://dex.wavesplatform.com/dex-demo?assetId2=DG2xFkPdDwKUoBkzGAhQtLpSGzfXLiCYPEzeKH2Ad24p&assetId1=WAVES',\n    //     },\n    //     {\n    //         label: 'Transfers',\n    //         url: '/transfers/usd-n',\n    //     },\n    //     {\n    //         label: 'Invoice Generator',\n    //         url: '/invoices/usd-n',\n    //     },\n    // ];\n\n    this.links = [{\n      label: 'Products',\n      onClick: this.triggerProductsList,\n      icon: arrowDown\n    }, {\n      label: 'Learn',\n      onClick: this.triggerLearnList,\n      icon: arrowDown\n    }, {\n      label: 'Login'\n    }];\n    this.state = {\n      isProductsListVisible: false,\n      isLearnListVisible: false,\n      isMobileMenuVisible: false\n    };\n  }\n\n  hideMobileMenu() {\n    this.setState({\n      isMobileMenuVisible: false\n    });\n  }\n\n  openMobileMenu() {\n    this.setState({\n      isMobileMenuVisible: true\n    });\n  }\n\n  triggerLearnList() {\n    this.setState(prevState => ({\n      isProductsListVisible: false,\n      isLearnListVisible: !prevState.isLearnListVisible\n    }));\n  }\n\n  triggerProductsList() {\n    this.setState(prevState => ({\n      isLearnListVisible: false,\n      isProductsListVisible: !prevState.isProductsListVisible\n    }));\n  }\n\n  mapLink(_ref) {\n    let {\n      onClick = () => {},\n      label,\n      icon,\n      url\n    } = _ref,\n        restProps = _objectWithoutProperties(_ref, [\"onClick\", \"label\", \"icon\", \"url\"]);\n\n    const {\n      isProductsListVisible,\n      isLearnListVisible\n    } = this.state;\n    const isChecked = label === 'Products' && isProductsListVisible || label === 'Learn' && isLearnListVisible ? 'opened' : '';\n    return __jsx(\"li\", null, __jsx(\"a\", _extends({}, restProps, {\n      href: url || '#',\n      onClick: onClick,\n      className: bem.element('h-link', isChecked)\n    }), __jsx(\"span\", null, label), icon && __jsx(\"img\", {\n      src: icon,\n      alt: \"\"\n    })));\n  }\n\n  onSuccessLogin() {\n    store.dispatch(goToPage('neutrino', {\n      currency: CurrencyEnum.USD_N\n    }));\n  }\n\n  onErrorLogin() {}\n\n  outsideHandler() {\n    this.setState({\n      isProductsListVisible: false,\n      isLearnListVisible: false\n    });\n  }\n\n  render() {\n    // const productLinks = this.productLinks.map(this.mapLink);\n    const {\n      isProductsListVisible,\n      isLearnListVisible,\n      isMobileMenuVisible\n    } = this.state;\n    return __jsx(\"div\", {\n      className: bem.element('main')\n    }, __jsx(GlobalLinksContext.Consumer, null, context => __jsx(InstallKeeperModalContext.Consumer, null, installKeeperContext => {\n      const {\n        links: currentLinks\n      } = this;\n      currentLinks[currentLinks.length - 1] = _objectSpread({}, currentLinks[currentLinks.length - 1], {\n        onClick: async () => {\n          try {\n            await dal.login();\n            store.dispatch(goToPage('neutrino', {\n              currency: CurrencyEnum.USD_N\n            }));\n          } finally {\n            installKeeperContext.openModal();\n          }\n        }\n      });\n      const links = currentLinks.map(this.mapLink);\n      const productLinks = context.product.map(this.mapLink);\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        className: bem.element('burger'),\n        onClick: this.openMobileMenu\n      }, __jsx(\"img\", {\n        src: burgerIcon\n      })), __jsx(\"div\", {\n        className: bem.element('logo')\n      }, __jsx(\"a\", {\n        href: \"/\"\n      }, __jsx(\"img\", {\n        src: mainLogo,\n        alt: \"neutrino\"\n      })), __jsx(\"span\", null, \"beta\")), isMobileMenuVisible && __jsx(\"div\", {\n        className: bem.element('mobile-menu')\n      }, __jsx(\"div\", null, __jsx(\"img\", {\n        src: crossIcon,\n        alt: \"\",\n        onClick: this.hideMobileMenu\n      })), __jsx(\"ul\", null, links[links.length - 1], productLinks, context.links.map(this.mapLink))), __jsx(OutsideAlerter, {\n        handler: this.outsideHandler,\n        className: bem.element('actions')\n      }, isProductsListVisible && __jsx(\"div\", {\n        className: bem.element('sub-dp', 'products')\n      }, __jsx(\"ul\", null, productLinks)), isLearnListVisible && __jsx(\"div\", {\n        className: bem.element('sub-dp', 'learn')\n      }, __jsx(\"ul\", null, context.links.map(this.mapLink))), __jsx(\"ul\", {\n        className: bem.element('links')\n      }, links)));\n    })));\n  }\n\n}\n\nexport default LandingHeader;","map":null,"metadata":{},"sourceType":"module"}